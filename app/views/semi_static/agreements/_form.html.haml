- if @agreement.errors.any?
  #error_explanation.errors
    %h2= "#{pluralize(@agreement.errors.count, "error")} prohibited this agreement from being saved:"
    %ul
      - @agreement.errors.full_messages.each do |msg|
        %li= msg

= form_for @agreement do |f|
  %fieldset
    - if @agreement.contacts.empty?
      = f.text_area :body
      = f.label :body, 'Agreement text body'
    - else
      = f.text_area :body, :readonly => 'readonly'
      .infobox#body_box
        %h4= 'Agreement with contacts'
        %p
          This
          %em agreement
          has been agreed by 
          = @agreement.contacts.size.to_s
          %em contacts.
          As you do not want to change the wording of the the exact agreement that the conatacts have accepted you cannot edit or delete this agreement unless the contacts are deleted.
      = f.label :body, 'Agreement text body', :class => 'infomarker'
  %fieldset
    = f.label :locale
    = f.select :locale, options_for_select(I18n.available_locales.collect{|l| [l, l]}, @agreement.locale)
  %fieldset
    = f.check_box :display
    = f.label :display, 'Display on contact form'
    %br/
    = f.check_box :ticked_by_default
    = f.label :ticked_by_default, 'Ticked by default on contact form'
    %br/
    = f.check_box :add_to_subscribers
    = f.label :add_to_subscribers, 'When ticked/agreed by the contact, then the contact should be added to the subscribers (for Newsletters, etc.)'
  .actions
    = f.submit 'Submit'
