-# TODO refector logic to scope in controller if this is used extensively

%table
  %tr
    %th Title
    %th Description (Caption)
    %th Entry Link
    %th{:colspan => 2} Position
    %th Home Page
    %th
    %th

  - @photos.each do |p|
    - next unless p.entry && (p.entry.tag_id == session[:workspace_tag_id].to_i)
    %tr
      %td= link_to p.title, edit_photo_path(p)
      %td= p.description
      %td
        = link_to p.entry.explicit_title, edit_entry_path(p.entry) if p.entry
      %td.number= p.position
      %td= SemiStatic::Photo::GALLERY[p.gallery_control].to_s.humanize
      %td.tick
        = image_tag('/assets/tick.png') if p.home_page
      %td= link_to image_tag('/assets/page_copy.png', :title => "Use #{[p.locale, ': ', p.title].join} as master for new photo"), new_photo_path(:master => p)
      %td= link_to image_tag('/assets/bin.png'), photo_path(p), :method => :delete, :data => { :confirm => 'Are you sure?' }
