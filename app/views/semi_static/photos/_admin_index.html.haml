%table
  %tr
    %th #
    %th
    %th Title
    %th Description (Caption)
    %th Entry Link
    %th{:colspan => 2} Position
    %th Locale
    %th{:title => 'Show on home Page'} H
    %th SEO
    %th
    %th

  - @photos.each do |p|
    %tr{:id => "photo_id_#{p.id}"}
      %td= p.id
      %td.photo
        - if p.img.exists?
          = link_to image_tag(p.img.url(:mini), :title => p.title), edit_photo_path(p)
      %td= link_to truncate(p.title, :length => 20), edit_photo_path(p)
      %td= truncate(p.description, :length => 30)
      %td
        = link_to truncate(p.entry.explicit_title, :length => 20), edit_entry_path(p.entry) if p.entry
      %td= p.position
      %td= truncate(SemiStatic::Photo::GALLERY[p.gallery_control].to_s.humanize, :length => 10)
      %td= p.locale.to_s
      %td.tick
        = image_tag('/assets/tick.png') if p.home_page
      %td.tick
        - if p.seo.nil?
          = link_to image_tag('/assets/add.png', :title => "Add SEO meta tags"), new_photo_seo_path(p, :return => photos_path), :remote => true
        - else
          = link_to image_tag('/assets/application_form_edit.png', :title => "Edit SEO meta tags"), edit_seo_path(p.seo, :return => photos_path), :remote => true
      %td= link_to image_tag('/assets/page_copy.png', :title => "Use #{[p.locale, ': ', p.title].join} as master for new photo"), new_photo_path(:master => p)
      %td= link_to image_tag('/assets/bin.png'), photo_path(p), :method => :delete, :data => { :confirm => 'Are you sure?' }, :remote => true
